# ID

`ID` is a zero-copy structure that uniquely identifies each inserted element. `ID` works as
a [Lamport Clock](https://martinfowler.com/articles/patterns-of-distributed-systems/lamport-clock.html). Each ID
consists of a pair of values:

- `ClientID`: a big-endian unsigned 32-bit integer representing globally unique identifier of the current client.
  Current client's identifier is stored within the [transaction](./transaction.md), persisted
  in [MetaStore](stores/00_meta_store.md) and then reused between process sessions. If `MetaStore` doesn't contain
  `ClientID` info yet (in example because document was just initialized), a new random `ClientID` will be generated and
  stored inside of `MetaStore`. DISCLAIMER: *a `0xffffffff` `ClientID` is a special value reserved for identifying root
  node types and cannot be used as a valid `ClientID`*.
- `Clock`: a big-endian unsigned 32-bit integer, representing monotonically incremented sequence within its client's
  scope.

The `ID` and it's corresponding components can be represented as:

```rust
use zerocopy::{FromBytes, Immutable, IntoBytes, KnownLayout};

pub type U32 = zerocopy::U32<zerocopy::byteorder::BE>;

#[repr(transparent)]
#[derive(
    Debug,
    Clone,
    Copy,
    PartialEq,
    Eq,
    Ord,
    PartialOrd,
    Hash,
    Default,
    FromBytes,
    KnownLayout,
    Immutable,
    IntoBytes
)]
pub struct ClientID(U32);
pub type Clock = U32;

#[repr(C)]
#[derive(
    PartialEq,
    Eq,
    Hash,
    Copy,
    Clone,
    FromBytes,
    KnownLayout,
    Immutable,
    IntoBytes,
    Default,
    Ord,
    PartialOrd,
)]
pub struct ID {
    pub client: ClientID,
    pub clock: Clock,
}
```

Each unique insertion within `ysr` must be accompanied by its own unique `ID`, which is generated by every client doing
an insertion by generating an ID based client's own unique `ClientID` and a monotonically incrementing `Clock`. All
clocks within a specific document are stored within the same key-space
called [StateVectorStore](stores/05_state_vector_store.md).